diff --git a/bgl_babylon.cc b/bgl_babylon.cc
index e840abe..aa736b7 100644
--- a/bgl_babylon.cc
+++ b/bgl_babylon.cc
@@ -26,6 +26,7 @@
 #include <stdlib.h>
 #include <string.h>
 #include <stdio.h>
+#include <unistd.h>
 #include <iconv.h>
 #include <QTextDocument>
 #include "gddebug.hh"
@@ -797,8 +798,8 @@ void Babylon::convertToUtf8( std::string &s, unsigned int type )
   inbufbytes = s.size();
   outbufbytes = s.size() * 6;
 
-  char *inbuf;
-  inbuf = (char *)s.data();
+  const char *inbuf;
+  inbuf = s.data();
   outbuf = (char*)malloc( outbufbytes + 1 );
   memset( outbuf, '\0', outbufbytes + 1 );
   defbuf = outbuf;
diff --git a/goldendict.pro b/goldendict.pro
index 808cfbf..a15f7ed 100644
--- a/goldendict.pro
+++ b/goldendict.pro
@@ -116,7 +116,7 @@ unix:!mac {
     arm {
         LIBS += -liconv
     } else {
-        LIBS += -lX11 -lXtst
+        LIBS += -lX11 -lXtst -lexecinfo
     }
 
     # Install prefix: first try to use qmake's PREFIX variable,
@@ -481,7 +481,6 @@ win32 {
 # This makes qmake generate translations
 
 win32:# Windows doesn't seem to have *-qt4 symlinks
-isEmpty(QMAKE_LRELEASE):QMAKE_LRELEASE = $$[QT_INSTALL_BINS]/lrelease
 isEmpty(QMAKE_LRELEASE):QMAKE_LRELEASE = $$[QT_INSTALL_BINS]/lrelease-qt4
 
 # The *.qm files might not exist when qmake is run for the first time,
diff --git a/iconv.cc b/iconv.cc
index 30f22a0..2361679 100644
--- a/iconv.cc
+++ b/iconv.cc
@@ -45,9 +45,9 @@ Iconv::Result Iconv::convert( void const * & inBuf, size_t  & inBytesLeft,
 {
   size_t result = iconv( state,
 //                         #ifdef __WIN32
-//                         (char const **)&inBuf,
+                         (char const **)&inBuf,
 //                         #else
-                         (char **)&inBuf,
+//                         (char **)&inBuf,
 //                         #endif
                                            &inBytesLeft,
                          (char **)&outBuf, &outBytesLeft );
diff --git a/mdictparser.cc b/mdictparser.cc
index 5517f29..4d7e457 100644
--- a/mdictparser.cc
+++ b/mdictparser.cc
@@ -215,7 +215,7 @@ QString MdictParser::toUtf16( const char * fromCode, const char * from, size_t f
   {
     char * outBuf = buf;
     size_t outBytesLeft = CHUNK_SIZE;
-    size_t ret = iconv( conv, inBuf, &fromSize, &outBuf, &outBytesLeft );
+    size_t ret = iconv( conv, (const char **)inBuf, &fromSize, &outBuf, &outBytesLeft );
 
     if ( ret == ( size_t ) - 1 )
     {
diff --git a/processwrapper.cc b/processwrapper.cc
index 9d52583..0163600 100644
--- a/processwrapper.cc
+++ b/processwrapper.cc
@@ -1,4 +1,5 @@
 #include "processwrapper.hh"
+#include <unistd.h>
 
 #include <QtCore>
 
diff --git a/qtsingleapplication/src/qtlocalpeer.cpp b/qtsingleapplication/src/qtlocalpeer.cpp
index 4a84036..e8b7fc2 100644
--- a/qtsingleapplication/src/qtlocalpeer.cpp
+++ b/qtsingleapplication/src/qtlocalpeer.cpp
@@ -52,7 +52,6 @@ static PProcessIdToSessionId pProcessIdToSessionId = 0;
 #if defined(Q_OS_UNIX)
 #include <sys/types.h>
 #include <time.h>
-#include <unistd.h>
 #endif
 
 namespace QtLP_Private {
